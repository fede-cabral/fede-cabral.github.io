JAJAJA sÃ­â€¦ bajamos del â€œGestor Dios Ultra Instintoâ€ al â€œGestor Beta Testerâ€ ğŸ˜‚

Tranquilo.
Volvemos a la versiÃ³n anterior potente, pero ahora:

âœ” DiseÃ±o mÃ¡s profesional
âœ” Separador de miles correcto
âœ” GrÃ¡fico sin â€œundefinedâ€
âœ” Orden automÃ¡tico de gastos
âœ” Mejor estructura
âœ” CÃ³digo limpio y escalable
âœ” Base lista para modo DIOS

ğŸš€ GESTOR PRO 2.0 â€” VersiÃ³n Mejorada Real

CopiÃ¡ y reemplazÃ¡ TODO tu archivo por esto:

<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Gestor Pro - FORJAX</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#0f172a;
    color:#f1f5f9;
}

header{
    background:#1e293b;
    padding:20px;
    text-align:center;
}

h1{margin:0}

main{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
    gap:20px;
    padding:20px;
}

.card{
    background:#1e293b;
    padding:20px;
    border-radius:15px;
    box-shadow:0 0 20px rgba(0,0,0,0.4);
}

.card.wide{
    grid-column:span 2;
}

input, select{
    width:100%;
    padding:10px;
    margin-bottom:10px;
    border:none;
    border-radius:8px;
}

button{
    width:100%;
    padding:10px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}

.btn-primary{ background:#3b82f6; color:white; }
.btn-danger{ background:#ef4444; color:white; }
.btn-success{ background:#22c55e; color:white; }

button:hover{ opacity:0.9; }

ul{list-style:none;padding:0}

li{
    background:#334155;
    padding:8px;
    margin-bottom:6px;
    border-radius:6px;
    cursor:pointer;
    transition:0.2s;
}
li:hover{background:#475569}

footer{
    text-align:center;
    padding:15px;
    background:#1e293b;
}

.login{
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
}
</style>
</head>
<body>

<div id="loginScreen" class="login">
    <h2>ğŸ” Gestor Pro - FORJAX</h2>
    <input id="userInput" placeholder="Usuario">
    <button class="btn-primary" onclick="login()">Entrar</button>
</div>

<div id="app">

<header>
    <h1>ğŸ“Š Gestor Personal Pro</h1>
    <button class="btn-danger" onclick="logout()">Cerrar SesiÃ³n</button>
</header>

<main>

<section class="card">
<h2>ğŸ’¼ Ingresos</h2>
<input id="incomeDesc" placeholder="DescripciÃ³n">
<input id="incomeAmount" type="number" placeholder="Monto">
<button class="btn-primary" onclick="addIncome()">Agregar</button>
<ul id="incomeList"></ul>
<p>Total: $<span id="incomeTotal">0</span></p>
</section>

<section class="card">
<h2>ğŸ’° Gastos</h2>
<input id="descInput" placeholder="DescripciÃ³n">
<select id="categoryInput">
<option>Comida</option>
<option>Servicios</option>
<option>Transporte</option>
<option>Estudio</option>
<option>Otros</option>
</select>
<input id="amountInput" type="number" placeholder="Monto">
<button class="btn-primary" onclick="addExpense()">Agregar</button>
<ul id="expenseList"></ul>
<p>Total: $<span id="expenseTotal">0</span></p>
</section>

<section class="card">
<h2>ğŸ“… Presupuesto Mensual</h2>
<input type="number" id="budgetInput" placeholder="Presupuesto del mes">
<button class="btn-primary" onclick="setBudget()">Guardar</button>
<p>Presupuesto: $<span id="budgetTotal">0</span></p>
<p>Disponible: $<span id="budgetAvailable">0</span></p>
</section>

<section class="card wide">
<h2>ğŸ“ˆ Balance General</h2>
<button class="btn-success" onclick="exportExcel()">Descargar Excel</button>
<p>Ingresos: $<span id="bIncome">0</span></p>
<p>Gastos: $<span id="bExpense">0</span></p>
<h3 id="balanceText"></h3>
<canvas id="chart"></canvas>
</section>

</main>

<footer>FORJAX Â© 2026</footer>

</div>

<script>

/* LOGIN */

let currentUser = localStorage.getItem("currentUser");
const app = document.getElementById("app");
const loginScreen = document.getElementById("loginScreen");

if(!currentUser){
    app.style.display="none";
}else{
    loginScreen.style.display="none";
}

function login(){
    const user=document.getElementById("userInput").value.trim();
    if(user.length<3) return alert("MÃ­nimo 3 caracteres");
    localStorage.setItem("currentUser",user.toLowerCase());
    location.reload();
}

function logout(){
    localStorage.removeItem("currentUser");
    location.reload();
}

/* DATOS */

const prefix=currentUser+"_";

let incomes=JSON.parse(localStorage.getItem(prefix+"incomes"))||[];
let expenses=JSON.parse(localStorage.getItem(prefix+"expenses"))||[];
let budget=Number(localStorage.getItem(prefix+"budget"))||0;

/* FORMATO */

function formatMoney(value){
    return Number(value).toLocaleString("es-AR");
}

function save(){
    localStorage.setItem(prefix+"incomes",JSON.stringify(incomes));
    localStorage.setItem(prefix+"expenses",JSON.stringify(expenses));
    localStorage.setItem(prefix+"budget",budget);
}

/* RENDER */

let chart;

function render(){

let totalInc=0;
let totalExp=0;

incomeList.innerHTML="";
expenseList.innerHTML="";

/* INGRESOS */

incomes.forEach((e,i)=>{
    totalInc+=Number(e.amount);
    let li=document.createElement("li");
    li.textContent=`${e.desc} - $${formatMoney(e.amount)}`;
    li.onclick=()=>{incomes.splice(i,1);save();render();}
    incomeList.appendChild(li);
});

/* GASTOS ORDENADOS */

expenses.sort((a,b)=>b.amount-a.amount);

expenses.forEach((e,i)=>{
    totalExp+=Number(e.amount);
    let li=document.createElement("li");
    li.textContent=`${e.desc} (${e.category}) - $${formatMoney(e.amount)}`;
    li.onclick=()=>{expenses.splice(i,1);save();render();}
    expenseList.appendChild(li);
});

/* TOTALES */

incomeTotal.textContent=formatMoney(totalInc);
expenseTotal.textContent=formatMoney(totalExp);
bIncome.textContent=formatMoney(totalInc);
bExpense.textContent=formatMoney(totalExp);

/* PRESUPUESTO */

budgetTotal.textContent=formatMoney(budget);
let disponible=budget-totalExp;
budgetAvailable.textContent=formatMoney(disponible);
budgetAvailable.style.color=disponible<0?"red":"lime";

/* BALANCE */

let balance=totalInc-totalExp;

if(balance>0){
    balanceText.textContent=`ğŸŸ¢ Ganancia $${formatMoney(balance)}`;
    balanceText.style.color="lime";
}else if(balance<0){
    balanceText.textContent=`ğŸ”´ PÃ©rdida $${formatMoney(Math.abs(balance))}`;
    balanceText.style.color="red";
}else{
    balanceText.textContent="âšª En equilibrio";
    balanceText.style.color="white";
}

/* GRAFICO FIXED */

if(chart) chart.destroy();

chart=new Chart(document.getElementById("chart"),{
    type:"bar",
    data:{
        labels:["Ingresos","Gastos","Balance"],
        datasets:[{
            label:"Resumen",
            data:[totalInc,totalExp,balance]
        }]
    },
    options:{
        responsive:true,
        plugins:{legend:{display:false}}
    }
});

}

/* BOTONES */

function addIncome(){
    if(!incomeDesc.value||incomeAmount.value<=0)return;
    incomes.push({desc:incomeDesc.value,amount:Number(incomeAmount.value)});
    incomeDesc.value="";
    incomeAmount.value="";
    save();render();
}

function addExpense(){
    if(!descInput.value||amountInput.value<=0)return;
    expenses.push({
        desc:descInput.value,
        amount:Number(amountInput.value),
        category:categoryInput.value
    });
    descInput.value="";
    amountInput.value="";
    save();render();
}

function setBudget(){
    if(!budgetInput.value)return;
    budget=Number(budgetInput.value);
    budgetInput.value="";
    save();render();
}

/* EXPORT */

function exportExcel(){
let data=[["GESTOR PRO - FORJAX"],[]];

data.push(["INGRESOS"]);
incomes.forEach(i=>data.push([i.desc,i.amount]));
data.push(["Total",incomes.reduce((a,b)=>a+Number(b.amount),0)]);
data.push([]);

data.push(["GASTOS"]);
expenses.forEach(e=>data.push([e.desc,e.category,e.amount]));

let wb=XLSX.utils.book_new();
let ws=XLSX.utils.aoa_to_sheet(data);

Object.keys(ws).forEach(c=>{
if(typeof ws[c].v==="number") ws[c].z="#,##0";
});

XLSX.utils.book_append_sheet(wb,ws,"Resumen");
XLSX.writeFile(wb,"forjax_finanzas_pro.xlsx");
}

render();

</script>
</body>
</html>
