<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestor Pro - Federico Cabral</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header>
    <h1> Gestor Personal Pro</h1>
    <p>Operaci贸n Transecon贸mico</p>
</header>

<main>

    <!-- INGRESOS -->
    <section class="card">
        <h2> Ingresos</h2>

        <input type="text" id="incomeDesc" placeholder="Descripci贸n">
        <input type="number" id="incomeAmount" placeholder="Monto">

        <button onclick="addIncome()">Agregar</button>

        <ul id="incomeList"></ul>

        <p>Total Ingresos: $<span id="incomeTotal">0</span></p>
    </section>

    <!-- TAREAS -->
    <section class="card">
        <h2> Tareas</h2>

        <input type="text" id="taskInput" placeholder="Nueva tarea...">

        <button onclick="addTask()">Agregar</button>

        <ul id="taskList"></ul>
    </section>

    <!-- GASTOS -->
    <section class="card">
        <h2> Gastos</h2>

        <input type="text" id="descInput" placeholder="Descripci贸n">
        <input type="number" id="amountInput" placeholder="Monto">

        <button onclick="addExpense()">Agregar</button>

        <ul id="expenseList"></ul>

        <p>Total: $<span id="total">0</span></p>
    </section>

    <!-- METAS -->
    <section class="card">
        <h2> Metas</h2>

        <input type="text" id="goalInput" placeholder="Nueva meta">

        <button onclick="addGoal()">Agregar</button>

        <ul id="goalList"></ul>
    </section>

</main>
    
<section class="card">
    <h2> Balance General</h2>
    <p>Ingresos: $<span id="showIncome">0</span></p>
    <p>Gastos: $<span id="showExpense">0</span></p>
    <h3>Balance: <span id="balance">0</span></h3>
</section>
<footer>
    <p>Creado por FORJAX - 2026</p>
    
</footer>

<script>

/////////////////////
// DATOS
/////////////////////

let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
let expenses = JSON.parse(localStorage.getItem("expenses")) || [];
let incomes = JSON.parse(localStorage.getItem("incomes")) || [];
let goals = JSON.parse(localStorage.getItem("goals")) || [];

/////////////////////
// ELEMENTOS
/////////////////////

const taskInput = document.getElementById("taskInput");
const taskList = document.getElementById("taskList");

const descInput = document.getElementById("descInput");
const amountInput = document.getElementById("amountInput");
const expenseList = document.getElementById("expenseList");
const totalSpan = document.getElementById("total");

const incomeDesc = document.getElementById("incomeDesc");
const incomeAmount = document.getElementById("incomeAmount");
const incomeList = document.getElementById("incomeList");
const incomeTotal = document.getElementById("incomeTotal");

const goalInput = document.getElementById("goalInput");
const goalList = document.getElementById("goalList");
const showIncome = document.getElementById("showIncome");
const showExpense = document.getElementById("showExpense");
const balanceSpan = document.getElementById("balance");

/////////////////////
// GUARDAR
/////////////////////

function saveData(){
    localStorage.setItem("tasks", JSON.stringify(tasks));
    localStorage.setItem("expenses", JSON.stringify(expenses));
    localStorage.setItem("incomes", JSON.stringify(incomes));
    localStorage.setItem("goals", JSON.stringify(goals));
}

/////////////////////
// RENDER
/////////////////////

function render(){

    // TAREAS
    taskList.innerHTML = "";

    tasks.forEach((t,i)=>{
        const li = document.createElement("li");

        li.textContent = t;

        li.onclick = ()=>{
            tasks.splice(i,1);
            saveData();
            render();
        };

        taskList.appendChild(li);
    });


    // GASTOS
    expenseList.innerHTML = "";
    let total = 0;

    expenses.forEach((e,i)=>{

        const li = document.createElement("li");

        li.textContent = `${e.desc} - $${e.amount}`;

        li.onclick = ()=>{
            expenses.splice(i,1);
            saveData();
            render();
        };

        total += Number(e.amount);

        expenseList.appendChild(li);
    });

    totalSpan.textContent = total;


    // INGRESOS
    incomeList.innerHTML = "";
    let totalIncome = 0;

    incomes.forEach((inc,i)=>{

        const li = document.createElement("li");

        li.textContent = `${inc.desc} - $${inc.amount}`;

        li.onclick = ()=>{
            incomes.splice(i,1);
            saveData();
            render();
        };

        totalIncome += Number(inc.amount);

        incomeList.appendChild(li);
    });

    incomeTotal.textContent = totalIncome;
showIncome.textContent = totalIncome;
showExpense.textContent = total;

const balance = totalIncome - total;
balanceSpan.textContent = balance;

if(balance >= 0){
    balanceSpan.style.color = "lime";
}else{
    balanceSpan.style.color = "red";
}

    // METAS
    goalList.innerHTML = "";

    goals.forEach((g,i)=>{

        const li = document.createElement("li");

        li.textContent = g;

        li.onclick = ()=>{
            goals.splice(i,1);
            saveData();
            render();
        };

        goalList.appendChild(li);
    });
}

/////////////////////
// BOTONES
/////////////////////

function addTask(){

    if(taskInput.value==="") return;

    tasks.push(taskInput.value);

    taskInput.value="";

    saveData();
    render();
}


function addExpense(){

    if(descInput.value==="" || amountInput.value==="") return;

    expenses.push({
        desc: descInput.value,
        amount: amountInput.value
    });

    descInput.value="";
    amountInput.value="";

    saveData();
    render();
}


function addGoal(){

    if(goalInput.value==="") return;

    goals.push(goalInput.value);

    goalInput.value="";

    saveData();
    render();
}


function addIncome(){

    if(incomeDesc.value==="" || incomeAmount.value==="") return;

    incomes.push({
        desc: incomeDesc.value,
        amount: incomeAmount.value
    });

    incomeDesc.value="";
    incomeAmount.value="";

    saveData();
    render();
}

/////////////////////
// INICIAR
/////////////////////

render();

</script>

</body>
</html>
